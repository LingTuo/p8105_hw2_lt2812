Homework 2
================
Ling Tuo
09/29/2020

  - [Problem 1](#problem-1)
  - [Problem 2](#problem-2)

This is my solution to HW2.

``` r
library(tidyverse)
library(readxl)
```

## Problem 1

Read the Mr. Trashwheel dataset.

``` r
trashwheel_df = 
  read_xlsx(
    "./p1p2_datasets/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "Mr. Trash Wheel",
    range = cell_cols("A:N")) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(
    sports_balls = round(sports_balls),
    sports_balls = as.integer(sports_balls)
  )
```

Read precipitation data for 2018 and 2017.

``` r
precip_2018 = 
  read_excel(
        "./p1p2_datasets/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
        sheet = "2018 Precipitation",
        skip = 1
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2018) %>% 
  relocate(year)

precip_2017 = 
  read_excel(
        "./p1p2_datasets/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
        sheet = "2017 Precipitation",
        skip = 1
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2017) %>% 
  relocate(year)
```

Now combine annual precipitation.

``` r
month_df = 
  tibble(
    month = 1:12,
    month_name = month.name
  )

precip_df = 
  bind_rows(precip_2018, precip_2017) 

left_join(precip_df, month_df, by = "month")
```

    ## # A tibble: 24 x 4
    ##     year month total month_name
    ##    <dbl> <dbl> <dbl> <chr>     
    ##  1  2018     1  0.94 January   
    ##  2  2018     2  4.8  February  
    ##  3  2018     3  2.69 March     
    ##  4  2018     4  4.69 April     
    ##  5  2018     5  9.27 May       
    ##  6  2018     6  4.77 June      
    ##  7  2018     7 10.2  July      
    ##  8  2018     8  6.45 August    
    ##  9  2018     9 10.5  September 
    ## 10  2018    10  2.12 October   
    ## # … with 14 more rows

This dataset contains information from the Mr. Trashwheel trash
collector in Baltimore, Maryland. As trash enters the inner harbor, the
trashwheel collects that trash, and stores it in a dumpster. The dataset
contains information on year, month, and trash collected, include some
specific kinds of trash. There are a total of 344 rows in our final
dataset. Additional data sheets include month precipitation data.

The total precipitation in 2018 is 70.33 and the median number of sports
balls in a dumpster in 2017 is 8.

## Problem 2

Read and clean the NYC Transit dataset.

``` r
nyctransit_df = 
  read_csv(
    "./p1p2_datasets/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  rename(
    ada_compliance = ada
    ) %>% 
  select(
    line, station_name, station_latitude, station_longitude, route1:route11, entry, vending, entrance_type, ada_compliance
    ) %>% 
  mutate(
    entry = case_when(entry == "YES" ~ "TRUE", entry == "NO" ~ "FALSE"), 
    entry = as.logical(entry)
    )
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_double(),
    ##   Route9 = col_double(),
    ##   Route10 = col_double(),
    ##   Route11 = col_double(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

  - This dataset contains information of the subway transformation in
    NYC, related to entrance and exit for each station. The dataset
    contains information on line, station name and location (longitude,
    latitude), routes served, entry, vending, entrance type, and ADA
    compliance.

  - Firstly, I load the dataset into nyctransit\_df, clean the variable
    names and rename the ‘ada’ and select variables of interest.

  - Then I convert the entry variable from character (YES vs NO) to a
    logical variable(TRUE vs FALSE). It is not a completely tidy format,
    since there are several columns of “routes\_served” that can be
    addressed into more clear format (in the following text).

  - To sum up, there are a total of 1868 rows, 19 columns in the final
    dataset.

Other related questions:

  - There are 465 distinct stations, identified both by name and by
    line.

  - There are 381 stations are ADA compliant.

  - The proportion of station entrances / exits without vending allow
    entrance is 0.3770492

Reformat data so that route number and route name are distinct
variables:

``` r
nyctransit_df_tidy = 
  nyctransit_df %>% 
  mutate_at(vars(route8:route11), as.character) %>% 
  pivot_longer(
    route1:route11,
    names_to = "routes_name",
    names_prefix = "route",
    values_to = "routes_number"
    ) %>% 
  drop_na(routes_number) 
```

  - There are 60 distinct stations serve the A train.

  - Of the stations that serve the A train, there are 17ADA compliant.
